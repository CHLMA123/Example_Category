<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">

	<title>SimplePing Class Reference</title>

	<link rel="stylesheet" href="../css/style.css">
	<meta name="viewport" content="initial-scale=1, maximum-scale=1.4">
	<meta name="generator" content="appledoc 2.2.1 (build 1334)">
</head>
<body class="appledoc">
	<header>
		<div class="container" class="hide-in-xcode">
			
			<h1 id="library-title">
				<a href="../index.html">Example_Category </a>
			</h1>

			<p id="developer-home">
				<a href="../index.html">mayer</a>
			</p>
			
		</div>
	</header>

	<aside>
		<div class="container">
			<nav>
				<ul id="header-buttons" role="toolbar">
					<li><a href="../index.html">Index</a></li>
<li><a href="../hierarchy.html">Hierarchy</a></li>

					<li id="on-this-page" role="navigation">
						<label>
							On This Page

							<div class="chevron">
								<div class="chevy chevron-left"></div>
								<div class="chevy chevron-right"></div>
							</div>

							<select id="jump-to">
	<option value="top">Jump To&#133;</option>
	
	<option value="overview">Overview</option>
	

	
	
	<option value="tasks">Tasks</option>
	
	

	
	
	<optgroup label="Properties">
		
		<option value="//api/name/addressStyle">addressStyle</option>
		
		<option value="//api/name/delegate">delegate</option>
		
		<option value="//api/name/host">host</option>
		
		<option value="//api/name/hostAddress">hostAddress</option>
		
		<option value="//api/name/hostAddressFamily">hostAddressFamily</option>
		
		<option value="//api/name/hostName">hostName</option>
		
		<option value="//api/name/identifier">identifier</option>
		
		<option value="//api/name/nextSequenceNumber">nextSequenceNumber</option>
		
		<option value="//api/name/nextSequenceNumberHasWrapped">nextSequenceNumberHasWrapped</option>
		
		<option value="//api/name/socket">socket</option>
		
	</optgroup>
	

	
	<optgroup label="Class Methods">
		
		<option value="//api/name/icmpHeaderOffsetInIPv4Packet:">+ icmpHeaderOffsetInIPv4Packet:</option>
		
	</optgroup>
	

	
	<optgroup label="Instance Methods">
		
		<option value="//api/name/didFailWithError:">- didFailWithError:</option>
		
		<option value="//api/name/didFailWithHostStreamError:">- didFailWithHostStreamError:</option>
		
		<option value="//api/name/hostResolutionDone">- hostResolutionDone</option>
		
		<option value="//api/name/initWithHostName:">- initWithHostName:</option>
		
		<option value="//api/name/pingPacketWithType:payload:requiresChecksum:">- pingPacketWithType:payload:requiresChecksum:</option>
		
		<option value="//api/name/readData">- readData</option>
		
		<option value="//api/name/sendPingWithData:">- sendPingWithData:</option>
		
		<option value="//api/name/start">- start</option>
		
		<option value="//api/name/startWithHostAddress">- startWithHostAddress</option>
		
		<option value="//api/name/stop">- stop</option>
		
		<option value="//api/name/stopHostResolution">- stopHostResolution</option>
		
		<option value="//api/name/stopSocket">- stopSocket</option>
		
		<option value="//api/name/validatePing4ResponsePacket:sequenceNumber:">- validatePing4ResponsePacket:sequenceNumber:</option>
		
		<option value="//api/name/validatePing6ResponsePacket:sequenceNumber:">- validatePing6ResponsePacket:sequenceNumber:</option>
		
		<option value="//api/name/validatePingResponsePacket:sequenceNumber:">- validatePingResponsePacket:sequenceNumber:</option>
		
		<option value="//api/name/validateSequenceNumber:">- validateSequenceNumber:</option>
		
	</optgroup>
	
	
</select>
						</label>
					</li>
				</ul>
			</nav>
		</div>
	</aside>

	<article>
		<div id="overview_contents" class="container">
			<div id="content">
				<main role="main">
					<h1 class="title">SimplePing Class Reference</h1>

					
					<div class="section section-specification"><table cellspacing="0"><tbody>
						<tr>
	<th>Inherits from</th>
	<td>NSObject</td>
</tr><tr>
	<th>Declared in</th>
	<td>SimplePing.h<br />SimplePing.m</td>
</tr>
						</tbody></table></div>
					

                    
					
					<div class="section section-overview">
						<a title="Overview" name="overview"></a>
						<h2 class="subtitle subtitle-overview">Overview</h2>
						<p>An object wrapper around the low-level BSD Sockets ping function.</p><p>To use the class create an instance, set the <a href="#//api/name/delegate">delegate</a> and call <a href="#//api/name/start"><code>start</code></a>
to <a href="#//api/name/start">start</a> the instance on the current run loop.  If things go well you&rsquo;ll soon get the
<code>-simplePing:didStartWithAddress:</code> <a href="#//api/name/delegate">delegate</a> callback.  From there you can can call
<a href="#//api/name/sendPingWithData:"><code>sendPingWithData:</code></a> to send a ping and you&rsquo;ll receive the
<code>-simplePing:didReceivePingResponsePacket:sequenceNumber:</code> and
<code>-simplePing:didReceiveUnexpectedPacket:</code> <a href="#//api/name/delegate">delegate</a> callbacks as ICMP packets arrive.</p>

<p>The class can be used from any thread but the use of any single instance must be
confined to a specific thread and that thread must run its run loop.</p>

<p>Calculates an IP checksum.</p><p>This is the standard BSD checksum code, modified to use modern types.</p>
					</div>
					
					

					
					
					<div class="section section-tasks">
						<a title="Tasks" name="tasks"></a>
						

						
						<h2 class="task-title">Other Methods</h2>

						<div class="task-list">
							<div class="section-method">
	<a name="//api/name/initWithHostName:" title="initWithHostName:"></a>
	<h3 class="method-title"><code><a href="#//api/name/initWithHostName:">&ndash;&nbsp;initWithHostName:</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Initialise the object to ping the specified <a href="#//api/name/host">host</a>.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (instancetype)initWithHostName:(NSString *)<em>hostName</em></code></div>

		    
			
			<div class="method-subsection arguments-section parameters">
				<h4 class="method-subtitle parameter-title">Parameters</h4>
				<table class="argument-def parameter-def">
				
					<tr>
						<th scope="row" class="argument-name"><code>hostName</code></th>
						<td><p>The DNS name of the <a href="#//api/name/host">host</a> to ping; an IPv4 or IPv6 address in string form will
work here.</p></td>
					</tr>
				
				</table>
			</div>
			

			
			<div class="method-subsection return">
				<h4 class="method-subtitle parameter-title">Return Value</h4>
				<p>The initialised object.</p>
			</div>
			

			

			
			<div class="method-subsection discussion-section">
				<h4 class="method-subtitle">Discussion</h4>
				<p>Initialise the object to ping the specified <a href="#//api/name/host">host</a>.</p>
			</div>
			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">SimplePing.h</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/hostName" title="hostName"></a>
	<h3 class="method-title"><code><a href="#//api/name/hostName">&nbsp;&nbsp;hostName</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>A copy of the value passed to <a href="#//api/name/initWithHostName:"><code>initWithHostName:</code></a>.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>@property (nonatomic, copy, readonly) NSString *hostName</code></div>

		    
			

			

			

			
			<div class="method-subsection discussion-section">
				<h4 class="method-subtitle">Discussion</h4>
				<p>A copy of the value passed to <a href="#//api/name/initWithHostName:"><code>initWithHostName:</code></a>.</p>
			</div>
			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">SimplePing.h</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/delegate" title="delegate"></a>
	<h3 class="method-title"><code><a href="#//api/name/delegate">&nbsp;&nbsp;delegate</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>The delegate for this object.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>@property (nonatomic, weak, readwrite, nullable) id&lt;SimplePingDelegate&gt; delegate</code></div>

		    
			

			

			

			
			<div class="method-subsection discussion-section">
				<h4 class="method-subtitle">Discussion</h4>
				<p>The delegate for this object.</p><p>Delegate callbacks are schedule in the default run loop mode of the run loop of the
thread that calls <a href="#//api/name/start"><code>start</code></a>.</p>
			</div>
			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">SimplePing.h</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/addressStyle" title="addressStyle"></a>
	<h3 class="method-title"><code><a href="#//api/name/addressStyle">&nbsp;&nbsp;addressStyle</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Controls the IP address version used by the object.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>@property (nonatomic, assign, readwrite) SimplePingAddressStyle addressStyle</code></div>

		    
			

			

			

			
			<div class="method-subsection discussion-section">
				<h4 class="method-subtitle">Discussion</h4>
				<p>Controls the IP address version used by the object.</p><p>You should set this value before starting the object.</p>
			</div>
			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">SimplePing.h</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/hostAddress" title="hostAddress"></a>
	<h3 class="method-title"><code><a href="#//api/name/hostAddress">&nbsp;&nbsp;hostAddress</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>The address being pinged.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>@property (nonatomic, copy, readonly, nullable) NSData *hostAddress</code></div>

		    
			

			

			

			
			<div class="method-subsection discussion-section">
				<h4 class="method-subtitle">Discussion</h4>
				<p>The address being pinged.</p><p>The contents of the NSData is a (struct sockaddr) of some form.  The
value is nil while the object is stopped and remains nil on <a href="#//api/name/start">start</a> until
<code>-simplePing:didStartWithAddress:</code> is called.</p>
			</div>
			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">SimplePing.h</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/hostAddressFamily" title="hostAddressFamily"></a>
	<h3 class="method-title"><code><a href="#//api/name/hostAddressFamily">&nbsp;&nbsp;hostAddressFamily</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>The address family for <a href="#//api/name/hostAddress"><code>hostAddress</code></a>, or <code>AF_UNSPEC</code> if that&rsquo;s nil.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>@property (nonatomic, assign, readonly) sa_family_t hostAddressFamily</code></div>

		    
			

			

			

			
			<div class="method-subsection discussion-section">
				<h4 class="method-subtitle">Discussion</h4>
				<p>The address family for <a href="#//api/name/hostAddress"><code>hostAddress</code></a>, or <code>AF_UNSPEC</code> if that&rsquo;s nil.</p>
			</div>
			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">SimplePing.h</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/identifier" title="identifier"></a>
	<h3 class="method-title"><code><a href="#//api/name/identifier">&nbsp;&nbsp;identifier</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>The identifier used by pings by this object.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>@property (nonatomic, assign, readonly) uint16_t identifier</code></div>

		    
			

			

			

			
			<div class="method-subsection discussion-section">
				<h4 class="method-subtitle">Discussion</h4>
				<p>The identifier used by pings by this object.</p><p>When you create an instance of this object it generates a random identifier
that it uses to identify its own pings.</p>
			</div>
			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">SimplePing.h</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/nextSequenceNumber" title="nextSequenceNumber"></a>
	<h3 class="method-title"><code><a href="#//api/name/nextSequenceNumber">&nbsp;&nbsp;nextSequenceNumber</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>The next sequence number to be used by this object.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>@property (nonatomic, assign, readonly) uint16_t nextSequenceNumber</code></div>

		    
			

			

			

			
			<div class="method-subsection discussion-section">
				<h4 class="method-subtitle">Discussion</h4>
				<p>The next sequence number to be used by this object.</p><p>This value starts at zero and increments each time you send a ping (safely
wrapping back to zero if necessary).  The sequence number is included in the ping,
allowing you to match up requests and responses, and thus calculate ping times and
so on.</p>
			</div>
			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">SimplePing.h</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/start" title="start"></a>
	<h3 class="method-title"><code><a href="#//api/name/start">&ndash;&nbsp;start</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Starts the object.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (void)start</code></div>

		    
			

			

			

			
			<div class="method-subsection discussion-section">
				<h4 class="method-subtitle">Discussion</h4>
				<p>Starts the object.</p><p>You should set up the <a href="#//api/name/delegate">delegate</a> and any ping parameters before calling this.</p>

<p>If things go well you&rsquo;ll soon get the <code>-simplePing:didStartWithAddress:</code> <a href="#//api/name/delegate">delegate</a>
callback, at which point you can start sending pings (via <a href="#//api/name/sendPingWithData:"><code>sendPingWithData:</code></a>) and
will start receiving ICMP packets (either ping responses, via the
<code>-simplePing:didReceivePingResponsePacket:sequenceNumber:</code> <a href="#//api/name/delegate">delegate</a> callback, or
unsolicited ICMP packets, via the <code>-simplePing:didReceiveUnexpectedPacket:</code> <a href="#//api/name/delegate">delegate</a>
callback).</p>

<p>If the object fails to start, typically because <a href="#//api/name/hostName"><code>hostName</code></a> doesn&rsquo;t resolve, you&rsquo;ll get
the <code>-simplePing:</code>didFailWithError:<code></code> <a href="#//api/name/delegate">delegate</a> callback.</p>

<p>It is not correct to start an already started object.</p>
			</div>
			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">SimplePing.h</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/sendPingWithData:" title="sendPingWithData:"></a>
	<h3 class="method-title"><code><a href="#//api/name/sendPingWithData:">&ndash;&nbsp;sendPingWithData:</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Sends a ping packet containing the specified data.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (void)sendPingWithData:(nullable NSData *)<em>data</em></code></div>

		    
			
			<div class="method-subsection arguments-section parameters">
				<h4 class="method-subtitle parameter-title">Parameters</h4>
				<table class="argument-def parameter-def">
				
					<tr>
						<th scope="row" class="argument-name"><code>data</code></th>
						<td><p>Some data to include in the ping packet, after the ICMP header, or nil if you
want the packet to include a standard 56 byte payload (resulting in a standard 64 byte
ping).</p></td>
					</tr>
				
				</table>
			</div>
			

			

			

			
			<div class="method-subsection discussion-section">
				<h4 class="method-subtitle">Discussion</h4>
				<p>Sends a ping packet containing the specified data.</p><p>Sends an actual ping.</p>

<p>The object must be started when you call this method and, on starting the object, you must
wait for the <code>-simplePing:didStartWithAddress:</code> <a href="#//api/name/delegate">delegate</a> callback before calling it.</p>
			</div>
			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">SimplePing.h</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/stop" title="stop"></a>
	<h3 class="method-title"><code><a href="#//api/name/stop">&ndash;&nbsp;stop</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Stops the object.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (void)stop</code></div>

		    
			

			

			

			
			<div class="method-subsection discussion-section">
				<h4 class="method-subtitle">Discussion</h4>
				<p>Stops the object.</p><p>You should call this when you&rsquo;re done pinging.</p>

<p>It&rsquo;s safe to call this on an object that&rsquo;s stopped.</p>
			</div>
			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">SimplePing.h</code></p>
			</div>
			
			
		</div>
	</div>
</div>
						</div>
						

						
						<h2 class="task-title">Other Methods</h2>

						<div class="task-list">
							<div class="section-method">
	<a name="//api/name/didFailWithError:" title="didFailWithError:"></a>
	<h3 class="method-title"><code><a href="#//api/name/didFailWithError:">&ndash;&nbsp;didFailWithError:</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Shuts down the pinger object and tell the <a href="#//api/name/delegate">delegate</a> about the error.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (void)didFailWithError:(NSError *)<em>error</em></code></div>

		    
			
			<div class="method-subsection arguments-section parameters">
				<h4 class="method-subtitle parameter-title">Parameters</h4>
				<table class="argument-def parameter-def">
				
					<tr>
						<th scope="row" class="argument-name"><code>error</code></th>
						<td><p>Describes the failure.</p></td>
					</tr>
				
				</table>
			</div>
			

			

			

			
			<div class="method-subsection discussion-section">
				<h4 class="method-subtitle">Discussion</h4>
				<p>Shuts down the pinger object and tell the <a href="#//api/name/delegate">delegate</a> about the error.</p>
			</div>
			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">SimplePing.m</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/didFailWithHostStreamError:" title="didFailWithHostStreamError:"></a>
	<h3 class="method-title"><code><a href="#//api/name/didFailWithHostStreamError:">&ndash;&nbsp;didFailWithHostStreamError:</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Shuts down the pinger object and tell the <a href="#//api/name/delegate">delegate</a> about the error.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (void)didFailWithHostStreamError:(CFStreamError)<em>streamError</em></code></div>

		    
			
			<div class="method-subsection arguments-section parameters">
				<h4 class="method-subtitle parameter-title">Parameters</h4>
				<table class="argument-def parameter-def">
				
					<tr>
						<th scope="row" class="argument-name"><code>streamError</code></th>
						<td><p>Describes the failure.</p></td>
					</tr>
				
				</table>
			</div>
			

			

			

			
			<div class="method-subsection discussion-section">
				<h4 class="method-subtitle">Discussion</h4>
				<p>Shuts down the pinger object and tell the <a href="#//api/name/delegate">delegate</a> about the error.</p><p>This converts the CFStreamError to an NSError and then call through to
<a href="#//api/name/didFailWithError:">didFailWithError:</a> to do the real work.</p>
			</div>
			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">SimplePing.m</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/pingPacketWithType:payload:requiresChecksum:" title="pingPacketWithType:payload:requiresChecksum:"></a>
	<h3 class="method-title"><code><a href="#//api/name/pingPacketWithType:payload:requiresChecksum:">&ndash;&nbsp;pingPacketWithType:payload:requiresChecksum:</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Builds a ping packet from the supplied parameters.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (NSData *)pingPacketWithType:(uint8_t)<em>type</em> payload:(NSData *)<em>payload</em> requiresChecksum:(BOOL)<em>requiresChecksum</em></code></div>

		    
			
			<div class="method-subsection arguments-section parameters">
				<h4 class="method-subtitle parameter-title">Parameters</h4>
				<table class="argument-def parameter-def">
				
					<tr>
						<th scope="row" class="argument-name"><code>type</code></th>
						<td><p>The packet type, which is different for IPv4 and IPv6.</p></td>
					</tr>
				
					<tr>
						<th scope="row" class="argument-name"><code>payload</code></th>
						<td><p>Data to place after the ICMP header.</p></td>
					</tr>
				
					<tr>
						<th scope="row" class="argument-name"><code>requiresChecksum</code></th>
						<td><p>Determines whether a checksum is calculated (IPv4) or not (IPv6).</p></td>
					</tr>
				
				</table>
			</div>
			

			
			<div class="method-subsection return">
				<h4 class="method-subtitle parameter-title">Return Value</h4>
				<p>A ping packet suitable to be passed to the kernel.</p>
			</div>
			

			

			
			<div class="method-subsection discussion-section">
				<h4 class="method-subtitle">Discussion</h4>
				<p>Builds a ping packet from the supplied parameters.</p>
			</div>
			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">SimplePing.m</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/icmpHeaderOffsetInIPv4Packet:" title="icmpHeaderOffsetInIPv4Packet:"></a>
	<h3 class="method-title"><code><a href="#//api/name/icmpHeaderOffsetInIPv4Packet:">+&nbsp;icmpHeaderOffsetInIPv4Packet:</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Calculates the offset of the ICMP header within an IPv4 packet.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>+ (NSUInteger)icmpHeaderOffsetInIPv4Packet:(NSData *)<em>packet</em></code></div>

		    
			
			<div class="method-subsection arguments-section parameters">
				<h4 class="method-subtitle parameter-title">Parameters</h4>
				<table class="argument-def parameter-def">
				
					<tr>
						<th scope="row" class="argument-name"><code>packet</code></th>
						<td><p>The IPv4 packet, as returned to us by the kernel.</p></td>
					</tr>
				
				</table>
			</div>
			

			
			<div class="method-subsection return">
				<h4 class="method-subtitle parameter-title">Return Value</h4>
				<p>The offset of the ICMP header, or NSNotFound.</p>
			</div>
			

			

			
			<div class="method-subsection discussion-section">
				<h4 class="method-subtitle">Discussion</h4>
				<p>Calculates the offset of the ICMP header within an IPv4 packet.</p><p>In the IPv4 case the kernel returns us a buffer that includes the
IPv4 header.  We&rsquo;re not interested in that, so we have to skip over it.
This code does a rough check of the IPv4 header and, if it looks OK,
returns the offset of the ICMP header.</p>
			</div>
			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">SimplePing.m</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/validateSequenceNumber:" title="validateSequenceNumber:"></a>
	<h3 class="method-title"><code><a href="#//api/name/validateSequenceNumber:">&ndash;&nbsp;validateSequenceNumber:</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Checks whether the specified sequence number is one we sent.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (BOOL)validateSequenceNumber:(uint16_t)<em>sequenceNumber</em></code></div>

		    
			
			<div class="method-subsection arguments-section parameters">
				<h4 class="method-subtitle parameter-title">Parameters</h4>
				<table class="argument-def parameter-def">
				
					<tr>
						<th scope="row" class="argument-name"><code>sequenceNumber</code></th>
						<td><p>The incoming sequence number.</p></td>
					</tr>
				
				</table>
			</div>
			

			
			<div class="method-subsection return">
				<h4 class="method-subtitle parameter-title">Return Value</h4>
				<p>YES if the sequence number looks like one we sent.</p>
			</div>
			

			

			
			<div class="method-subsection discussion-section">
				<h4 class="method-subtitle">Discussion</h4>
				<p>Checks whether the specified sequence number is one we sent.</p>
			</div>
			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">SimplePing.m</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/validatePing4ResponsePacket:sequenceNumber:" title="validatePing4ResponsePacket:sequenceNumber:"></a>
	<h3 class="method-title"><code><a href="#//api/name/validatePing4ResponsePacket:sequenceNumber:">&ndash;&nbsp;validatePing4ResponsePacket:sequenceNumber:</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Checks whether an incoming IPv4 packet looks like a ping response.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (BOOL)validatePing4ResponsePacket:(NSMutableData *)<em>packet</em> sequenceNumber:(uint16_t *)<em>sequenceNumberPtr</em></code></div>

		    
			
			<div class="method-subsection arguments-section parameters">
				<h4 class="method-subtitle parameter-title">Parameters</h4>
				<table class="argument-def parameter-def">
				
					<tr>
						<th scope="row" class="argument-name"><code>packet</code></th>
						<td><p>The IPv4 packet, as returned to us by the kernel.</p></td>
					</tr>
				
					<tr>
						<th scope="row" class="argument-name"><code>sequenceNumberPtr</code></th>
						<td><p>A pointer to a place to <a href="#//api/name/start">start</a> the ICMP sequence number.</p></td>
					</tr>
				
				</table>
			</div>
			

			
			<div class="method-subsection return">
				<h4 class="method-subtitle parameter-title">Return Value</h4>
				<p>YES if the packet looks like a reasonable IPv4 ping response.</p>
			</div>
			

			

			
			<div class="method-subsection discussion-section">
				<h4 class="method-subtitle">Discussion</h4>
				<p>Checks whether an incoming IPv4 packet looks like a ping response.</p><p>This routine modifies this <code>packet</code> data!  It does this for two reasons:</p>

<ul>
<li><p>It needs to zero out the <code>checksum</code> field of the ICMPHeader in order to do
its checksum calculation.</p></li>
<li><p>It removes the IPv4 header from the front of the packet.</p></li>
</ul>

			</div>
			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">SimplePing.m</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/validatePing6ResponsePacket:sequenceNumber:" title="validatePing6ResponsePacket:sequenceNumber:"></a>
	<h3 class="method-title"><code><a href="#//api/name/validatePing6ResponsePacket:sequenceNumber:">&ndash;&nbsp;validatePing6ResponsePacket:sequenceNumber:</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Checks whether an incoming IPv6 packet looks like a ping response.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (BOOL)validatePing6ResponsePacket:(NSMutableData *)<em>packet</em> sequenceNumber:(uint16_t *)<em>sequenceNumberPtr</em></code></div>

		    
			
			<div class="method-subsection arguments-section parameters">
				<h4 class="method-subtitle parameter-title">Parameters</h4>
				<table class="argument-def parameter-def">
				
					<tr>
						<th scope="row" class="argument-name"><code>packet</code></th>
						<td><p>The IPv6 packet, as returned to us by the kernel; note that this routine
could modify this data but does not need to in the IPv6 case.</p></td>
					</tr>
				
					<tr>
						<th scope="row" class="argument-name"><code>sequenceNumberPtr</code></th>
						<td><p>A pointer to a place to <a href="#//api/name/start">start</a> the ICMP sequence number.</p></td>
					</tr>
				
				</table>
			</div>
			

			
			<div class="method-subsection return">
				<h4 class="method-subtitle parameter-title">Return Value</h4>
				<p>YES if the packet looks like a reasonable IPv4 ping response.</p>
			</div>
			

			

			
			<div class="method-subsection discussion-section">
				<h4 class="method-subtitle">Discussion</h4>
				<p>Checks whether an incoming IPv6 packet looks like a ping response.</p>
			</div>
			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">SimplePing.m</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/validatePingResponsePacket:sequenceNumber:" title="validatePingResponsePacket:sequenceNumber:"></a>
	<h3 class="method-title"><code><a href="#//api/name/validatePingResponsePacket:sequenceNumber:">&ndash;&nbsp;validatePingResponsePacket:sequenceNumber:</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Checks whether an incoming packet looks like a ping response.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (BOOL)validatePingResponsePacket:(NSMutableData *)<em>packet</em> sequenceNumber:(uint16_t *)<em>sequenceNumberPtr</em></code></div>

		    
			
			<div class="method-subsection arguments-section parameters">
				<h4 class="method-subtitle parameter-title">Parameters</h4>
				<table class="argument-def parameter-def">
				
					<tr>
						<th scope="row" class="argument-name"><code>packet</code></th>
						<td><p>The packet, as returned to us by the kernel; note that may end up modifying
this data.</p></td>
					</tr>
				
					<tr>
						<th scope="row" class="argument-name"><code>sequenceNumberPtr</code></th>
						<td><p>A pointer to a place to <a href="#//api/name/start">start</a> the ICMP sequence number.</p></td>
					</tr>
				
				</table>
			</div>
			

			
			<div class="method-subsection return">
				<h4 class="method-subtitle parameter-title">Return Value</h4>
				<p>YES if the packet looks like a reasonable IPv4 ping response.</p>
			</div>
			

			

			
			<div class="method-subsection discussion-section">
				<h4 class="method-subtitle">Discussion</h4>
				<p>Checks whether an incoming packet looks like a ping response.</p>
			</div>
			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">SimplePing.m</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/readData" title="readData"></a>
	<h3 class="method-title"><code><a href="#//api/name/readData">&ndash;&nbsp;readData</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Reads data from the ICMP <a href="#//api/name/socket">socket</a>.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (void)readData</code></div>

		    
			

			

			

			
			<div class="method-subsection discussion-section">
				<h4 class="method-subtitle">Discussion</h4>
				<p>Reads data from the ICMP <a href="#//api/name/socket">socket</a>.</p><p>Called by the <a href="#//api/name/socket">socket</a> handling code (SocketReadCallback) to process an ICMP
message waiting on the <a href="#//api/name/socket">socket</a>.</p>
			</div>
			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">SimplePing.m</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/startWithHostAddress" title="startWithHostAddress"></a>
	<h3 class="method-title"><code><a href="#//api/name/startWithHostAddress">&ndash;&nbsp;startWithHostAddress</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Starts the send and receive infrastructure.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (void)startWithHostAddress</code></div>

		    
			

			

			

			
			<div class="method-subsection discussion-section">
				<h4 class="method-subtitle">Discussion</h4>
				<p>Starts the send and receive infrastructure.</p><p>This is called once we&rsquo;ve successfully resolved <a href="#//api/name/hostName"><code>hostName</code></a> in to
<a href="#//api/name/hostAddress"><code>hostAddress</code></a>.  It&rsquo;s responsible for setting up the <a href="#//api/name/socket">socket</a> for sending and
receiving pings.</p>
			</div>
			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">SimplePing.m</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/hostResolutionDone" title="hostResolutionDone"></a>
	<h3 class="method-title"><code><a href="#//api/name/hostResolutionDone">&ndash;&nbsp;hostResolutionDone</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Processes the results of our name-to-address resolution.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (void)hostResolutionDone</code></div>

		    
			

			

			

			
			<div class="method-subsection discussion-section">
				<h4 class="method-subtitle">Discussion</h4>
				<p>Processes the results of our name-to-address resolution.</p><p>Called by our CFHost resolution callback (HostResolveCallback) when <a href="#//api/name/host">host</a>
resolution is complete.  We just latch the first appropriate address and kick
off the send and receive infrastructure.</p>
			</div>
			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">SimplePing.m</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/stopHostResolution" title="stopHostResolution"></a>
	<h3 class="method-title"><code><a href="#//api/name/stopHostResolution">&ndash;&nbsp;stopHostResolution</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Stops the name-to-address resolution infrastructure.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (void)stopHostResolution</code></div>

		    
			

			

			

			
			<div class="method-subsection discussion-section">
				<h4 class="method-subtitle">Discussion</h4>
				<p>Stops the name-to-address resolution infrastructure.</p>
			</div>
			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">SimplePing.m</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/stopSocket" title="stopSocket"></a>
	<h3 class="method-title"><code><a href="#//api/name/stopSocket">&ndash;&nbsp;stopSocket</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>Stops the send and receive infrastructure.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>- (void)stopSocket</code></div>

		    
			

			

			

			
			<div class="method-subsection discussion-section">
				<h4 class="method-subtitle">Discussion</h4>
				<p>Stops the send and receive infrastructure.</p>
			</div>
			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">SimplePing.m</code></p>
			</div>
			
			
		</div>
	</div>
</div>
						</div>
						

						<a title="Extension Methods" name="task_Extension Methods"></a>
						<h2 class="task-title">Extension Methods</h2>

						<div class="task-list">
							<div class="section-method">
	<a name="//api/name/nextSequenceNumberHasWrapped" title="nextSequenceNumberHasWrapped"></a>
	<h3 class="method-title"><code><a href="#//api/name/nextSequenceNumberHasWrapped">&nbsp;&nbsp;nextSequenceNumberHasWrapped</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>True if <a href="#//api/name/nextSequenceNumber">nextSequenceNumber</a> has wrapped from 65535 to 0.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>@property (nonatomic, assign, readwrite) BOOL nextSequenceNumberHasWrapped</code></div>

		    
			

			

			

			
			<div class="method-subsection discussion-section">
				<h4 class="method-subtitle">Discussion</h4>
				<p>True if <a href="#//api/name/nextSequenceNumber">nextSequenceNumber</a> has wrapped from 65535 to 0.</p>
			</div>
			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">SimplePing.m</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/host" title="host"></a>
	<h3 class="method-title"><code><a href="#//api/name/host">&nbsp;&nbsp;host</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>A host object for name-to-address resolution.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>@property (nonatomic, strong, readwrite, nullable) CFHostRef host</code></div>

		    
			

			

			

			
			<div class="method-subsection discussion-section">
				<h4 class="method-subtitle">Discussion</h4>
				<p>A host object for name-to-address resolution.</p>
			</div>
			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">SimplePing.m</code></p>
			</div>
			
			
		</div>
	</div>
</div><div class="section-method">
	<a name="//api/name/socket" title="socket"></a>
	<h3 class="method-title"><code><a href="#//api/name/socket">&nbsp;&nbsp;socket</a></code>
</h3>

	<div class="method-info">
		<div class="pointy-thing"></div>

		<div class="method-info-container">
			
			
			<div class="method-subsection brief-description">
				<p>A socket object for ICMP send and receive.</p>
			</div>
			
		    

			<div class="method-subsection method-declaration"><code>@property (nonatomic, strong, readwrite, nullable) CFSocketRef socket</code></div>

		    
			

			

			

			
			<div class="method-subsection discussion-section">
				<h4 class="method-subtitle">Discussion</h4>
				<p>A socket object for ICMP send and receive.</p>
			</div>
			

			

			

			
			<div class="method-subsection declared-in-section">
				<h4 class="method-subtitle">Declared In</h4>
				<p><code class="declared-in-ref">SimplePing.m</code></p>
			</div>
			
			
		</div>
	</div>
</div>
						</div>
						
					</div>
					
					

                    
                    
          
				</main>

				<footer>
					<div class="footer-copyright">
						
						<p class="copyright">Copyright &copy; 2017 mayer. All rights reserved. Updated: 2017-01-07</p>
						
						
						<p class="generator">Generated by <a href="http://appledoc.gentlebytes.com">appledoc 2.2.1 (build 1334)</a>.</p>
						
					</div>
				</footer>
			</div>
		</div>
	</article>

	<script src="../js/script.js"></script>
</body>
</html>